var initPhotoSwipeFromDOM=function(){var e=function(e){var t=[];return e.children("img").each(function(){item={},base=$(this).attr("data-base"),ext=$(this).attr("data-extension"),msrc=$(this).attr("data-src")||$(this).attr("src"),jQuery.each($(this).attr("data-presets").split(" "),function(e,t){preset_info=t.split(","),name=preset_info[0],size_factor=r()?2:1,retina=r()?".2x.":".",w=parseInt(preset_info[1]),h=parseInt(preset_info[2]),src=base+name+retina+ext,item[name]={src:src,msrc:msrc,w:size_factor*w,h:size_factor*h}}),t.push(item)}),t},t=function(){var e=window.location.hash.substring(1),t={};if(e.length<5)return t;var n=e.split("&");for(var r=0;r<n.length;r++){if(!n[r])continue;var i=n[r].split("=");if(i.length<2)continue;t[i[0]]=i[1]}return t.gid&&(t.gid=parseInt(t.gid,10)),t.hasOwnProperty("pid")?(t.pid=parseInt(t.pid,10),t):t},n=function(t,n){var i=$(".pswp")[0],o,u,a;a=e(s),u={index:parseInt(t),preload:[5,5],getThumbBoundsFn:function(e){return el=$("[data-pswp-gid='"+e+"']").children("img"),{x:el.offset().left,y:el.offset().top,w:el.width()}}},n&&(u.showAnimationDuration=0),o=new PhotoSwipe(i,PhotoSwipeUI_Default,a,u);var f,l="medium_large",c=!0,h;o.listen("beforeResize",function(){size_factor=r()?2:1,f=o.viewportSize.x*size_factor,l!="huge"&&f>=1600&&"huge"in a[0]?(l="huge",h=!0):l!="xlarge"&&f>=1024&&"xlarge"in a[0]?(l="xlarge",h=!0):l!="large"&&f>=800&&"large"in a[0]?(l="large",h=!0):l!="medium_large"&&(l="medium_large",h=!0),h&&!c&&o.invalidateCurrItems(),c&&(c=!1),h=!1}),o.listen("gettingData",function(e,t){t.src=t[l].src,t.msrc=t[l].msrc,t.w=t[l].w,t.h=t[l].h}),o.init()},r=function(){return window.matchMedia&&(window.matchMedia("only screen and (min-resolution: 144dpi), only screen and (min-resolution: 1.3dppx), only screen and (min-resolution: 48.8dpcm)").matches||window.matchMedia("only screen and (-webkit-min-device-pixel-ratio: 1.3), only screen and (-o-min-device-pixel-ratio: 2.6/2), only screen and (min--moz-device-pixel-ratio: 1.3), only screen and (min-device-pixel-ratio: 1.3)").matches)||window.devicePixelRatio&&window.devicePixelRatio>1.3},s=$("a.k-link-lightbox");i=0,s.each(function(){$(this).children("img").length>0&&($(this).click(function(e){return n(parseInt($(this).first().attr("data-pswp-gid"))),!1}),$(this).attr("data-pswp-gid",i),i++)});var o=t();o.pid>0&&n(o.pid-1,!0)};